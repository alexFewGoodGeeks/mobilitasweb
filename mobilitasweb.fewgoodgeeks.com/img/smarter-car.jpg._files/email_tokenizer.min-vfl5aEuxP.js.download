define(["require","exports","tslib","react","dig-components/avatar","spectrum/token","spectrum/tokenized_input","modules/clean/validators/email_validator"],(function(e,t,n,r,a,u,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),i=n.__importDefault(i),t.EmailTokenizer=function(e){var t=e.placeholder,o=e.emails,c=e.memberList,s=e.onChange,f=r.useState(),d=f[0],m=f[1],p=r.useState(),v=p[0],_=p[1],g=r.useState(o),k=g[0],E=g[1],y=function(e){return e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length&&!k.includes(e)}))},h=function(e){var t=e.email,n=c&&c.find((function(e){return e.email===t}));return n?r.default.createElement(r.default.Fragment,null,n.photo_url&&r.default.createElement(a.Avatar,{src:n.photo_url,size:"xsmall",hasNoOutline:!0}),n.display_name):r.default.createElement(r.default.Fragment,null,t)};return r.default.createElement(l.TokenizedInput,{className:"email-tokenizer",inputProps:{autoFocus:!0,placeholder:t,onChange:function(e){m(e.currentTarget.value);var t=y(e.currentTarget.value);t&&s(n.__spreadArrays(k,t))},onFocus:function(){return _(void 0)},onKeyDown:function(e){var t,r=e.key,a=e.currentTarget,u=a.selectionStart,l=a.selectionEnd,i=a.previousElementSibling;if(0===u&&l===u&&("ArrowLeft"!==r&&"Backspace"!==r||(e.preventDefault(),null===(t=i)||void 0===t||t.focus())),d&&["Enter","Tab",","," "].includes(r)){var o=y(d);o&&(e.preventDefault(),s(n.__spreadArrays(k,o)),E(n.__spreadArrays(k,o)),m(""))}},value:d,type:"email"},tokens:k.map((function(e){return r.default.createElement(u.Token,{key:e,variant:i.default.validate(e).every((function(e){return e.valid}))?"default":"error",selected:e===v,onClick:function(){return _(e)},onFocus:function(){return _(e)},onClose:function(t){return(function(e,t){var n,r,a=e.currentTarget.closest(".mc-token"),u=a.previousElementSibling;null===(n=a.nextElementSibling)||void 0===n||n.focus(),null===(r=u)||void 0===r||r.focus(),E(k.filter((function(e){return e!==t}))),s(o.filter((function(e){return e!==t})))})(t,e)}},r.default.createElement(h,{email:e}))}))})}}));
//# sourceMappingURL=email_tokenizer.min.js-vflPQaIlE.map