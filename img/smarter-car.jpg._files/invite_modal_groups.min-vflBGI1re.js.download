define(["require","exports","tslib","react","modules/core/i18n","dig-components/buttons","dig-components/tooltips","dig-components/icons/src","dig-components/modal","dig-components/typography","dig-components/icons","modules/clean/components/loading_indicator","modules/clean/react/css","modules/clean/teams/admin/widgets/groups/groups_typeahead","modules/clean/teams/admin/widgets/invite_modal/email_tokenizer","modules/clean/teams/admin/widgets/groups/create_group_modal","modules/clean/validators/email_validator"],(function(e,t,a,n,l,s,o,r,i,u,d,m,c,f,g,p,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importStar(n),v=a.__importDefault(v);var _={email:{title:n.default.createElement(u.Text,{isBold:!0},l.intl.formatMessage({id:"W3tNbf",defaultMessage:"Add email addresses"})),valid:function(e,t){return!t&&e.every((function(e){return v.default.validate(e).every((function(e){return e.valid}))}))},error:l.intl.formatMessage({id:"FXfq01",defaultMessage:"Enter a valid email address"})},groups:{title:n.default.createElement("div",null,l.intl.formatMessage({id:"cxuwqy",defaultMessage:"<text>Add members to groups</text> <faint>(Optional)</faint>"},{text:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement(u.Text,{isBold:!0},e)},faint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement(u.Text,{color:"faint"},e)}})),valid:function(e,t){return!t&&e.every((function(e){return"default"===e}))},error:l.intl.formatMessage({id:"zPKMtc",defaultMessage:"Group name incomplete"}),tooltip:n.default.createElement(o.Tooltip,{className:"group-row-tooltip",title:l.intl.formatMessage({id:"ugUr8k",defaultMessage:"Create groups to quickly give the right people access to files."})},n.default.createElement("div",{className:"group-row-tooltip__content"},n.default.createElement(d.UIIcon,{className:"middle-align",src:r.HelpFill})))}},E=function(e){var t=e.title,a=e.submitted,l=e.valid,s=e.values,o=e.error,r=e.children,i=e.input,d=e.tooltip;return n.default.createElement(n.default.Fragment,null,t,n.default.createElement("div",{className:"tooltip-container"},r,d),a&&!l(s,i)?n.default.createElement(u.Text,{className:"validation-msg",color:"error"},o):null)};t.GroupsInviteModal=c.requireCssWithComponent((function(e){var t,o=e.open,r=e.isSubmitting,d=void 0!==r&&r,c=e.memberList,v=e.handleOnClose,M=e.sendInvites,y=e.handleCSVImport,h="invite-modal-groups",C=n.useState({emails:[],groups:[]}),b=C[0],S=C[1],x=n.useState(),I=x[0],N=x[1],w=n.useState([]),T=w[0],k=w[1],B=n.useState(!1),q=B[0],G=B[1],A=n.useState(!1),F=A[0],L=A[1];n.useEffect((function(){S({emails:[],groups:[]}),o&&f.fetchGroups().then(k)}),[o]),n.useEffect((function(){d&&L(!0)}),[d]);var O=function(e){k((function(t){return a.__spreadArrays(t,[e])})),S(a.__assign(a.__assign({},b),{groups:a.__spreadArrays(b.groups,[e])}))};return q?n.default.createElement(p.CreateGroupModal,{open:q,handleOnClose:function(e){G(!1),e&&!f.groupExists(b.groups,e.group_name)&&O(e)}}):n.default.createElement(i.Modal,{open:o,className:h,overlayClassName:h+"__overlay",withCloseButton:l.intl.formatMessage({id:"lNU//O",defaultMessage:"Close Modal"}),onRequestClose:function(){return v()}},n.default.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(u.Title,null,l.intl.formatMessage({id:"nvkATX",defaultMessage:"Invite members to your team"}))),n.default.createElement(i.Modal.Body,{className:h+"__body"},n.default.createElement(E,a.__assign({},_.email,{values:b.emails,submitted:F}),n.default.createElement(g.EmailTokenizer,{placeholder:b.emails.length?void 0:l.intl.formatMessage({id:"yU0xda",defaultMessage:"Email address"}),emails:b.emails,memberList:c,onChange:function(e){return S(a.__assign(a.__assign({},b),{emails:e}))}})),n.default.createElement(E,a.__assign({},_.groups,{input:I,values:b.groups.map((function(e){return e.variant})),submitted:F}),n.default.createElement(f.GroupsTypeahead,{selected:b.groups,groups:T,onCreate:O,onChange:function(e){return S(a.__assign(a.__assign({},b),{groups:e}))},onInputChange:function(e){return N(e)},handleCreateModal:function(e){return G(e)}}))),n.default.createElement(i.Modal.Footer,null,y&&n.default.createElement(s.Button,{variant:"transparent",onClick:function(){return y()}},l.intl.formatMessage({id:"7uyY2y",defaultMessage:"Import CSV"})),n.default.createElement(s.Button,{variant:"outline",onClick:function(){return v()}},l.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),n.default.createElement(s.Button,{variant:"primary",onClick:function(){return M(b.emails,b.groups.map((function(e){return e.group_id})))},disabled:!(null===(t=b.emails)||void 0===t?void 0:t.length)},l.intl.formatMessage({id:"yzFoXG",defaultMessage:"Send invites"}),d&&n.default.createElement(m.LoadingIndicator,{style:m.LoadingIndicator.LoadingIndicatorStyle.SPINNER}))))}),["/static/css/dig-components/index.web-vfliFNMrU.css","/static/css/teams/admin/widgets/invite_modal/invite_modal_groups-vflkIoD4t.css"])}));
//# sourceMappingURL=invite_modal_groups.min.js-vfloyEEOX.map