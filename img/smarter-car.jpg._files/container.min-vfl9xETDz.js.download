define(["require","exports","tslib","prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/react/file_viewer/sdk_file_viewer/async_file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/conversions/conversion_utils","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal","modules/constants/file_viewer"],(function(e,i,n,o,t,r,s,a,l,d,u,c,p,_,h,m,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),o=n.__importDefault(o);var g=(function(i){function g(e){var n=i.call(this,e)||this,o=u.Viewer.get_viewer(),t=e.userId?o.get_user_by_id(e.userId):o.work_user||o.personal_user;n.state={user:t},_.log_js_modules_application_code_start();var r=e.file,s=p.getStoreForFileViewer();return p.hydrateFileViewerNamespace(s,{file:r},t),t&&h.initializeStore(t,[r]),n}return n.__extends(g,i),g.prototype.componentDidMount=function(){var i,o=this,s=this.props,a=s.shareEmail,u=s.sharedLinkInfo,p=s.file;if(a&&this.state.user)new Promise((function(i,n){e(["modules/clean/react/browse/models"],i,n)})).then(n.__importStar).then((function(e){var i=e.File;d.asyncShowPrefilledShareModal({user:o.state.user,sharePrefillEmails:a.split(","),content:new i(o.props.file)})}));else if(this.props.authModalKind!==r.LoginOrRegisterKind.IMMEDIATE||this.state.user)this.props.presentInZoom&&this.state.user&&m.asyncShowModal(this.state.user.id,p.file_id,"file-viewer-modal-overlay","desktop");else{c.shouldShowPersistentHeader()||c.shouldNotShowInitialModal()||(i=this.props.encryptionOptions,n.__awaiter(o,void 0,void 0,(function(){var o,s,a;return n.__generator(this,(function(l){switch(l.label){case 0:return[4,Promise.all([new Promise((function(i,n){e(["modules/clean/react/modal"],i,n)})).then(n.__importStar),new Promise((function(i,n){e(["modules/clean/auth/login_or_register/modal"],i,n)})).then(n.__importStar)])];case 1:return o=l.sent(),s=o[0].Modal,a=o[1].LoginOrRegisterModal,s.showInstance(t.default.createElement(a,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:r.Mode.REGISTER,kind:r.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register",showGoogleRegistration:!0,googleRegisterProps:u?{signupContinuationUrl:u.url}:void 0,encryptionOptions:i})),[2]}}))})))}if(this.props.openImmediatelyInApp){var _=this.props.file;l.openImmediately(_.open_in_app_data)}},g.prototype.shouldUseSDKToRender=function(){var e=this.props.sharedLinkInfo,i=e&&!e.hasPublicAudienceOrVisibility;return Boolean(f.INBAND_FVSDK_LINKS&&i)},g.prototype.render=function(){var e=this.props,i=e.file,o=e.fileViewerProps,r=e.onCloseUrl,l=e.isEmbedded,d=e.brandingInfo,u=e.encryptionOptions,c=e.openInHelloSign,p=e.openInHelloSignSrc,_=e.sharedLinkInfo,h=e.shareToken,m=e.sharePermission,f=e.LoggedOutUXGoogleVariant,g=e.LoggedOutUXPaperVariant,w=e.authModalKind,v=this.state.user,I=_&&v&&this.shouldUseSDKToRender()?t.default.createElement(a.AsyncFileViewer,{sharedLinkInfo:_,user:v,file:i}):t.default.createElement(s.FileViewer,n.__assign({},o,{fileCount:1,fileIndex:0,titleBarCloseUrl:r,sharedLinkInfo:_,brandingInfo:d,openInHelloSign:c,openInHelloSignSrc:p,shareToken:h,sharePermission:m,user:v,transparentBackground:!1,LoggedOutUXGoogleVariant:f,LoggedOutUXPaperVariant:g,encryptionOptions:u,authModalKind:w}));return l?t.default.createElement("div",{className:"embedded"},I):I},g.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},g.childContextTypes={authModalKind:o.default.oneOf(["download","immediate",null])},g})((t=n.__importDefault(t)).default.Component);i.FileViewerContainer=g}));
//# sourceMappingURL=container.min.js-vflRJ5LAT.map