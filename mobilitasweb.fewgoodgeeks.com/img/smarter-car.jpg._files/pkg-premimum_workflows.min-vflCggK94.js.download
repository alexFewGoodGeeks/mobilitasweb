var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/abuse/async_report_flag",["require","exports","modules/clean/react/async/loadable"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={loader:function(){return new Promise((function(t,r){e(["modules/clean/abuse/report_flag"],t,r)})).then(__importStar).then((function(e){return e.ReportFlag}))}};t.AsyncReportFlag=r.Loadable(a)})),define("modules/clean/api_v2/redux/user_link_analytics",["require","exports","modules/clean/api_v2/redux/base_action"],(function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Action={GetUserAnalytics:"@@apiv2_redux/user_link_analytics/get_user_analytics",GetUserAnalyticsResult:"@@apiv2_redux/user_link_analytics/get_user_analytics_result",GetUserFileAnalytics:"@@apiv2_redux/user_link_analytics/get_user_file_analytics",GetUserFileAnalyticsResult:"@@apiv2_redux/user_link_analytics/get_user_file_analytics_result"},t.getUserAnalyticsAction=r._createAction(t.Action.GetUserAnalytics),t.getUserAnalyticsResultAction=r._createAction(t.Action.GetUserAnalyticsResult),t.getUserFileAnalyticsAction=r._createAction(t.Action.GetUserFileAnalytics),t.getUserFileAnalyticsResultAction=r._createAction(t.Action.GetUserFileAnalyticsResult);var n=((a={})[t.Action.GetUserAnalytics]={endpoint:"get_user_analytics",action:t.getUserAnalyticsResultAction},a[t.Action.GetUserFileAnalytics]={endpoint:"get_user_file_analytics",action:t.getUserFileAnalyticsResultAction},a);t.middleware=r._createMiddleware(n)})),define("modules/clean/integrations/zoom_share_dialog/async_modal",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowModal=function(t,a,n,o){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(t,r){e(["modules/clean/integrations/zoom_share_dialog/modal"],t,r)})).then(r.__importStar)];case 1:return(0,i.sent().showModal)(t,a,n,o||"web"),[2]}}))}))}})),define("modules/clean/loggers/workflows_logger",["require","exports","tslib","modules/clean/logging/hive/schemas/web-workflows","modules/clean/logging/telemetry","modules/clean/previews/util","modules/clean/react/file_viewer/models","modules/clean/logging/hive/schemas/web-workflows"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.hiveLogger=new n.HiveLogger,t.WorkflowsEventExtra=s.WorkflowsEventExtra,(function(e){e.WatermarkApplyOverwrite="watermark_apply_overwrite",e.WatermarkApplySaveAsCopy="watermark_apply_save_as_copy",e.WatermarkCancel="watermark_cancel",e.WatermarkEducationTooltipExposed="watermark_education_tooltip_exposed",e.WatermarkEducationTooltipClicked="watermark_education_tooltip_clicked",e.WatermarkEnable="watermark_enable",e.WatermarkOpenApplyMenu="watermark_open_apply_menu",e.WatermarkPositionMenuOpened="watermark_position_menu_opened",e.WatermarkPositionMenuSelectionMade="watermark_position_menu_selection_made",e.WatermarkRotationClicked="watermark_rotation_clicked",e.WatermarkSizeChanged="watermark_size_changed",e.WatermarkTextInputEnterFocus="watermark_text_input_enter_focus",e.WatermarkTextInputExitFocus="watermark_text_input_exit_focus",e.WatermarkTransparencyChanged="watermark_transparency_changed",e.WatermarkUpsellHeaderButtonClicked="watermark_upsell_header_button_clicked",e.WatermarkUpsellPopoverClickedProCopy="watermark_upsell_popover_clicked_pro_copy",e.WatermarkUpsellPopoverClickedWmCopy="watermark_upsell_popover_clicked_wm_copy",e.WatermarkUpsellPopoverExposedProCopy="watermark_upsell_popover_exposed_pro_copy",e.WatermarkUpsellPopoverExposedWmCopy="watermark_upsell_popover_exposed_wm_copy",e.WatermarkUpsellSingleLineProClicked="watermark_upsell_single_line_pro_clicked",e.WatermarkUpsellSingleLineProExposed="watermark_upsell_single_line_pro_exposed",e.WatermarkUpsellTooltipClicked="watermark_upsell_tooltip_clicked",e.WatermarkUpsellTooltipExposed="watermark_upsell_tooltip_exposed",e.WatermarkVersionHistoryClicked="watermark_version_history_clicked",e.WatermarkTextTabClicked="watermark_type_text_clicked",e.WatermarkImageTabClicked="watermark_type_image_clicked",e.WatermarkImageUploadClicked="watermark_image_upload_clicked",e.WatermarkImageUploaded="watermark_image_uploaded",e.WatermarkImageDeleted="watermark_image_deleted",e.WatermarkColorClicked="watermark_color_clicked",e.WatermarkToolbarClicked="watermark_toolbar_clicked",e.WatermarkPageNumberClicked="watermark_page_number_clicked",e.WatermarkArrowClicked="watermark_arrow_clicked",e.WatermarkPagePreviewClicked="watermark_page_preview_clicked",e.MarkupEnabled="markup_enabled",e.MarkupRectangleClicked="markup_rectangle_clicked",e.MarkupCircleClicked="markup_circle_clicked",e.MarkupTextboxClicked="markup_textbox_clicked",e.MarkupArrowClicked="markup_arrow_clicked",e.MarkupDrawClicked="markup_draw_clicked",e.MarkupApplyOverwrite="markup_apply_overwrite",e.MarkupApplySaveAsCopy="markup_apply_save_as_copy",e.MarkupCancel="markup_cancel",e.MarkupDelete="markup_delete",e.MarkupCustomizationClicked="markup_customization_clicked"})(t.WorkflowsEvent||(t.WorkflowsEvent={})),t.logWorkflowsEvent=function(e,r,n){var s=i.FilePreviewSession.currentSession;if(s&&s.fileViewerSession){var l={event_name:e,source_context:s.sourceContext,device_type:s.fileViewerSession.deviceType,milestone:r,ns_id:s.file.ns_id,file_obj_id:s.file.file_id,file_viewer_session_id:s.fileViewerSession.id,file_preview_session_id:s.id,file_size:s.file.bytes||-1,file_preview_size:s.previewSize,file_extension:o.getWhitelistedExtensionFromFile(s.file),platform:"desktop"===s.fileViewerSession.deviceType?"web":"mobile_web",extra:n};t.hiveLogger.log(new a.WebWorklowsLoggingTableRow(l))}}})),define("modules/clean/logging/hive/schemas/web-workflows",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.category="web-workflows",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_id=null,this.event_name=e.event_name,this.source_context=e.source_context,this.device_type=e.device_type,this.milestone=e.milestone,this.app_id=e.app_id,this.ns_id=e.ns_id,this.file_obj_id=e.file_obj_id,this.file_viewer_session_id=e.file_viewer_session_id,this.file_preview_session_id=e.file_preview_session_id,this.file_size=e.file_size,this.file_preview_size=e.file_preview_size,this.file_extension=e.file_extension,this.platform=e.platform,this.extra=e.extra,Object.seal(this)};t.WebWorklowsLoggingTableRow=r})),define("modules/clean/mouse_button_code",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.LEFT=0]="LEFT"})(t.MouseButtonCode||(t.MouseButtonCode={}))})),define("modules/clean/premium-workflows/data/store",["require","exports","external/lodash","premium-workflows/data/reducer","modules/clean/api_v2/redux/user_link_analytics","modules/clean/api_v2/default_user_client","redux","modules/clean/redux/devtools"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProAnalyticsStore=r.once((function(e){var t=new o.DefaultUserApiV2Client(e);return i.createStore(a.reducer,s.composeEnhancersWithDevTools(i.applyMiddleware(n.middleware(t.ns("user_link_analytics")))))}))})),define("modules/clean/react/branding/background",["require","exports","tslib","react","premium-workflows/components/branding/background","modules/clean/react/premium_kit/types","modules/clean/react/premium_kit/asset_utils"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.Background=function(e){var t=e.backgroundAsset,r=e.className;switch(i.getAssetType(t)){case o.AssetType.Image:var s=t.graphic.value;return a.createElement(n.ImageBackground,{className:r,src:s.original_url});case o.AssetType.Video:var l=t.graphic.value;return a.createElement(n.VideoBackground,{className:r,src:l.original_url});case o.AssetType.Color:return a.createElement(n.ColorBackground,{className:r,colorHex:t.color_hex});default:return null}}})),define("modules/clean/react/branding/branding_modal_controller",["require","exports","tslib","react","modules/clean/react/css","premium-workflows/components/branding/cover_modal","modules/clean/react/branding/background","dig-components/modal","modules/clean/react/hooks/storage"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a);var c={initialValue:{isModalOpen:!0},key:"BRANDING_MODAL_CONTROLLER"};function u(e){return!!(e&&e.logoUrl&&e.organizationName&&e.backgroundAsset)}t.canBrandingModalRender=u,t.UnstyledBrandingModalController=function(e){var t=e.brandingInfo,r=e.closeButtonText,n=l.useSessionStorage(c),d=n[0].isModalOpen,p=n[1];return a.default.useEffect((function(){return s.Modal.setAppElement(document.getElementById("embedded-app")||document.body)}),[]),u(t)?a.default.createElement(o.CoverModal,{onClose:function(){p({isModalOpen:!1})},open:d,background:a.default.createElement(i.Background,{backgroundAsset:t.backgroundAsset}),orgLogoUrl:t.logoUrl,orgName:t.organizationName,closeButtonText:r}):null},t.BrandingModalController=n.requireCssWithComponent(t.UnstyledBrandingModalController,["/static/css/dig-components/index.web-vfliFNMrU.css","/static/js/premium-workflows/index.web-vfljIz3fW.css"])})),define("modules/clean/react/branding/optional_branding_block",["require","exports","tslib","react","modules/clean/react/css","premium-workflows/components/branding/branding_block","modules/clean/react/branding/background"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.UnstyledOptionalBrandingBlock=function(e){var t=e.brandingInfo,r=e.className,n=e.showBackground;return t&&t.logoUrl&&t.organizationName?a.default.createElement(o.BrandingBlock,{background:n&&t.backgroundAsset&&a.default.createElement(i.Background,{backgroundAsset:t.backgroundAsset}),className:r,orgLogoUrl:t.logoUrl,orgName:t.organizationName}):null},t.OptionalBrandingBlock=n.requireCssWithComponent(t.UnstyledOptionalBrandingBlock,["/static/css/dig-components/index.web-vfliFNMrU.css","/static/js/premium-workflows/index.web-vfljIz3fW.css"])})),define("modules/clean/react/comments2/components/mobile_web_comments",["require","exports","tslib","react","external/lodash","modules/clean/web_timing_logger","modules/clean/react/async/loadable"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),n=r.__importStar(n),t.AsyncManagedCommentsTab=i.Loadable({loader:function(){return o.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/file_sidebar/managed_comments_tab"],t,r)})).then(r.__importStar).then((function(e){return e.ManagedCommentsTab}))}))}}),t.MobileWebComments=function(e){return a.default.createElement(t.AsyncManagedCommentsTab,r.__assign({},e,{collapsed:!1,fileSidebarDispatch:n.noop,isMobile:!0,isVersionHistoryMode:!1}))}}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/file_metadata/component/loadable_metadata_details",["require","exports","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableMetadataDetails=r.Loadable({loader:function(){return a.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/file_metadata/component/metadata_details"],t,r)})).then(__importStar).then((function(e){return e.MetadataDetails}))}))}})})),define("modules/clean/react/file_sidebar/file_sidebar_connect",["require","exports","tslib","react","react-redux","hoist-non-react-statics"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),o=r.__importDefault(o),t.FILE_SIDEBAR_REDUX_STORE_KEY="SIDEBAR_REDUX_STORE_KEY",t.fileSidebarConnect=function(e,i){var s={storeKey:t.FILE_SIDEBAR_REDUX_STORE_KEY},l=i?n.connect(e,i,void 0,s):n.connect(e,void 0,void 0,s);return function(e){var t=l(e),n=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(n,e),n.prototype.render=function(){return a.default.createElement(t,r.__assign({},this.props))},n.displayName="FileSidebar"+t.displayName,n.WrappedComponent=t,n})(a.default.Component);return o.default(n,t)}}})),define("modules/clean/react/file_sidebar/file_sidebar_provider",["require","exports","tslib","react","modules/clean/react/file_sidebar/generic_file_sidebar_provider","modules/clean/react/file_sidebar/store/instance"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(t){var r=e.call(this,t)||this;return r.state={loaded:!0,store:o.store},r}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){var e=this.state.store;e&&e.dispatch({type:"::RESET"})},t.prototype.render=function(){return a.default.createElement(n.GenericFileSidebarProvider,null,this.props.children)},t})((a=r.__importDefault(a)).default.Component);t.FileSidebarProvider=i})),define("modules/clean/react/file_sidebar/generic_file_sidebar_provider",["require","exports","tslib","react","react-redux","modules/clean/react/file_sidebar/file_sidebar_connect","modules/clean/react/file_sidebar/store/instance"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a);var s=n.createProvider(o.FILE_SIDEBAR_REDUX_STORE_KEY),l=(function(e){function t(t){var r=e.call(this,t)||this;return r.state={loaded:!0,store:i.store},r}return r.__extends(t,e),t.prototype.render=function(){return a.default.createElement(s,{store:this.state.store},this.props.children)},t})(a.default.Component);t.GenericFileSidebarProvider=l})),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","classnames","react","spectrum/button","spectrum/file_icon","spectrum/icon_content","spectrum/icon_form","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/css"],(function(e,t,r,a,n,o,i,s,l,c,u,d,p){"use strict";function m(e){var t=e.onClose;return n.default.createElement("header",null,n.default.createElement("h1",{className:"DropboxLogo"},n.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),n.default.createElement("img",{src:u.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),n.default.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},n.default.createElement(l.IconForm,{name:"cancel"})))}function f(e){var t=e.appUrl,r=e.onContinue,a=e.onAppDownload;return n.default.createElement("div",{className:"app-download-interstitial-ctas"},n.default.createElement(o.Button,{className:"app-download-interstitial-cta",size:"large",href:t,onClick:a},d.intl.formatMessage({id:"81NCFj",defaultMessage:"Get the app"})),n.default.createElement(o.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:r},d.intl.formatMessage({id:"OGP7zL",defaultMessage:"Or continue to website"})))}function _(e){var t,r,a=e.fileOrFolderName,o=e.isFolder,l=e.ownerName,c=e.ownerTeamName;return n.default.createElement("section",{className:"app-download-interstitial-content"},n.default.createElement("header",null,n.default.createElement("h2",null,d.intl.formatMessage({id:"PHaeBQ",defaultMessage:"Get a better view with our mobile app"}))),n.default.createElement("div",{className:"app-download-interstitial-content-thumbnail"},o?n.default.createElement(s.IconContent,{name:"folder_shared-large"}):n.default.createElement(i.FileIcon,{path:a,variant:"large"}),n.default.createElement("p",{className:"app-download-interstitial-filename"},a),n.default.createElement("p",{className:"app-download-interstitial-owner"},(r=c,(t=l)&&r?d.intl.formatMessage({id:"pYAdxo",defaultMessage:"{owner} ({team}) shared this with you."},{owner:t,team:r}):t&&!r?d.intl.formatMessage({id:"UpPnqL",defaultMessage:"{owner} shared this with you."},{owner:t}):!t&&r?d.intl.formatMessage({id:"YVlUTG",defaultMessage:"{team} shared this with you."},{team:r}):d.intl.formatMessage({id:"esqj6U",defaultMessage:"This file was shared with you."})))))}function g(e){if(e){if(c.areUrlsIOS(e))return e.iOSAppStoreUrl;if(c.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),n=r.__importDefault(n);var w=p.requireCssWithComponent((function(e){var t=e.className,r=e.open_in_app_data,o=e.fileOrFolderName,i=e.isFolder,s=e.onClose,l=e.onContinue,c=e.onAppDownload,u=e.ownerName,d=e.ownerTeamName;return n.default.createElement("section",{className:a.default("app-download-interstitial-container",t)},n.default.createElement(m,{onClose:s}),n.default.createElement(_,{isFolder:i,fileOrFolderName:o,ownerName:u,ownerTeamName:d}),n.default.createElement(f,{onContinue:l,onAppDownload:c,appUrl:g(r)}))}),["/static/css/index/obsidian/logo-vflwvo1dq.css","/static/css/file_viewer/app_download_interstitial-vfltlXZTJ.css"]);t.AppDownloadInterstitial=w})),define("modules/clean/react/file_viewer/location_utils",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],(function(e,t,r,a,n,o){"use strict";function i(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function s(e,t){var r=n.default.get_uri();return t?r.updateQuery(e,t):r.removeQuery(e),r}function l(e){n.default.push_state(e.getPath(),e.getQuery())}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o),t.getFilenameFromLocation=function(e){return e?e.query.preview:""},t.addToFileSubpath=function(e,t){return e?e+"/"+t:"/"+t},t.truncateFileSubpath=i,t.shortenFileSubpathBy=function(e,t){if(e){if(t<=0)return e;var r=e.split("/");return i(e,r.length-t-1)}},t.updateFileSubpathQuery=function(e){l(s(a.SubpathQueryKey,e))},t.getFileSubpath=function(e){var t,r=e.query[a.SubpathQueryKey];if(!(t=r instanceof Array?r.length?r[0]:void 0:r)||0===t.indexOf("/"))return t;o.reportStack("path malformed",{severity:o.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}})},t.getPageQuery=function(e){var t=e.query[a.PageQueryKey];if(t){var r=+t;return r||void 0}},t.updatePageQuery=function(e){e?e>0&&l(s(a.PageQueryKey,e.toString())):l(s(a.PageQueryKey,null))}})),define("modules/clean/react/file_viewer/title_utils",["require","exports","modules/constants/python","modules/clean/filepath","modules/clean/file_store/utils","modules/core/i18n"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeButtonTitle=function(e){var t=(function(e){var t=e.file,i=e.fileViewAction,s=e.fileViewOrigin;return e.isVersionHistoryMode?o.intl.formatMessage({id:"kfhlgf",defaultMessage:"Version history"}):s===r.FileViewOriginType.RECENTS?o.intl.formatMessage({id:"hDgBBt",defaultMessage:"Recents"}):s===r.FileViewOriginType.HOME?o.intl.formatMessage({id:"cPi7mo",defaultMessage:"Home"}):s!==r.FileViewOriginType.PHOTOS&&i!==r.FileViewActionType.SEARCH&&n.isBrowseFile(t)&&t.fq_path?a.filename(a.parent_dir(t.fq_path)):void 0})(e);return!e.sharedLinkInfo&&t?o.intl.formatMessage({id:"LyB3q5",defaultMessage:"Back to {folder}"},{folder:t}):o.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})},t.customLogoUrl=function(e){return e?e.ownerTeamLogo:void 0}})),define("modules/clean/react/file_viewer/url_utils",["require","exports","tslib","modules/clean/history","modules/core/browser"],(function(e,t,r,a,n){"use strict";function o(e){a.default.push_state(e.getPath(),e.getQuery())}Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),n=r.__importStar(n),t.linkClickHandler=function(e){return function(t){t.ctrlKey||t.metaKey||e(t)}},t.getCurrentFolderHref=function(){var e=n.get_uri();return e.removeQuery("preview"),e},t.closeFile=function(){var e,t;e="preview",(t=a.default.get_uri()).removeQuery(e),o(t)},t.openFile=function(e){(function(e,t){var r={};r[e]=t;var n=a.default.get_uri();n.updateQuery(r),o(n)})("preview",e.filename)}})),define("modules/clean/react/hooks/storage",["require","exports","tslib","react"],(function(e,t,r,a){"use strict";function n(e,t){var r=t.decode,n=void 0===r?JSON.parse:r,o=t.encode,i=void 0===o?JSON.stringify:o,s=t.initialValue,l=t.key,c=a.default.useState((function(){try{var t=e.getItem(l);return null!==t?n(t):s}catch(e){return s}})),u=c[0],d=c[1];return[u,function(t){try{e.setItem(l,i(t)),d(t)}catch(e){}}]}Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.useLocalStorage=function(e){return n(window.localStorage,e)},t.useSessionStorage=function(e){return n(window.sessionStorage,e)}})),define("modules/clean/react/location/with_location",["require","exports","tslib","react","modules/clean/react/location/types","modules/core/browser","modules/clean/history","modules/clean/react/helpers"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),o=r.__importStar(o),i=r.__importDefault(i);var l=function(e){return{location:e}};t.withLocation=function(e,t){var c;return void 0===t&&(t=l),(c=(function(s){function l(e){var r=s.call(this,e)||this;r.onLocationChange=function(e,a){r.setState(t(new n.Location(r.basePathComponent+"/"+decodeURIComponent(e),a),r.props))};var a=o.get_uri(),i=a.getPath();return r.basePathComponent="/"+i.split("/")[1],r.state=t(n.Location.fromURI(a),e),r}return r.__extends(l,s),l.prototype.componentDidMount=function(){i.default.add_callback(this.basePathComponent,this.onLocationChange,!0)},l.prototype.componentWillUnmount=function(){i.default.remove_callback(this.basePathComponent,this.onLocationChange)},l.prototype.render=function(){return a.default.createElement(e,r.__assign({},this.props,this.state))},l})(a.default.PureComponent)).displayName="WithLocation("+s.getDisplayName(e)+")",c}})),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","react","modules/clean/react/css","modules/clean/open_in_app/actions","modules/core/i18n","modules/constants/file_viewer","modules/core/browser"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),l=r.__importStar(l);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={closed:!1,showInstallAppText:!1},t.handleAppRedirect=function(){var e;t.props.onClick&&t.props.onClick(),t.props.isMountedFile&&(null===(e=t.props.urls)||void 0===e?void 0:e.platform)===s.OpenInMobileAppPlatform.ANDROID_MARKET?l.redirect(t.props.urls.androidAppUrl):o.openInApp(t.props.urls,{onAppNeeded:function(){return t.setState({showInstallAppText:!0})},onAppInstalled:function(){return t.setState({showInstallAppText:!1})}})},t.dismiss=function(){t.setState({closed:!0});var e=t.props.onClose;e&&e()},t}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){o.cleanUp()},t.prototype.render=function(){var e=this.state,t=e.closed,r=e.showInstallAppText;return t||!this.props.urls?null:a.default.createElement("div",{className:"open-in-app-banner-container"},a.default.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},r?i.intl.formatMessage({id:"ye+BbQ",defaultMessage:"Get the Dropbox App"}):this.props.isMountedFile&&this.props.urls.platform===s.OpenInMobileAppPlatform.ANDROID_MARKET?i.intl.formatMessage({id:"gxO/+x",defaultMessage:"Open App"}):i.intl.formatMessage({id:"pezXnL",defaultMessage:"View In App"})),a.default.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.dismiss}))},t})(a.default.Component),u=n.requireCssWithComponent(c,["/static/css/open_in_app/banner-vfl1xt3Tn.css"]);t.OpenInAppBanner=u})),define("modules/clean/react/premium_kit/api",["require","exports","tslib","modules/clean/api_v2/user_client"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAssetByBlock=function(e,t,n,o){return r.__awaiter(this,void 0,Promise,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:if(0===n.length)throw new Error("blockTokens list must not be empty");return i={library_assets_to_add:[{asset_library_id:o,assets_to_add:[{asset_id:t,file_args:{".tag":"add_by_blocks",tokens:n}}]}]},[4,(new a.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/add_assets",i,{subjectUserId:e}).then((function(e){var t,r=e.added_library_assets[0].added_assets[0].result;switch(r[".tag"]){case"asset":return(null===(t=null==r?void 0:r.graphic)||void 0===t?void 0:t.fallback_image_url)?r:void 0;case"asset_error":throw new Error(r.message);default:throw new Error("unexpected .tag value "+r[".tag"])}}))];case 1:return[2,r.sent()]}}))}))},t.getAssetLibraries=function(e,t){var r={asset_library_ids:t};return(new a.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/get",r,{subjectUserId:e})},t.removeAssetLibrary=function(e,t){return r.__awaiter(this,void 0,Promise,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n={asset_library_id:t},[4,(new a.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/remove",n,{subjectUserId:e})];case 1:return[2,r.sent()]}}))}))}})),define("modules/clean/react/premium_kit/asset_utils",["require","exports","modules/clean/react/premium_kit/types"],(function(e,t,r){"use strict";function a(e){return!!e.color_hex&&!e.graphic}function n(e){var t,r;return!!e.color_hex&&"video"===(null===(r=null===(t=e.graphic)||void 0===t?void 0:t.value)||void 0===r?void 0:r[".tag"])}function o(e){var t,r;return!!e.color_hex&&"image"===(null===(r=null===(t=e.graphic)||void 0===t?void 0:t.value)||void 0===r?void 0:r[".tag"])}Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetType=function(e){return a(e)?r.AssetType.Color:n(e)?r.AssetType.Video:o(e)?r.AssetType.Image:r.AssetType.Other},t.isAssetTypeColor=a,t.isAssetTypeVideo=n,t.isAssetTypeImage=o})),define("modules/clean/react/premium_kit/errors",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){this.message=e};t.PremiumKitError=a;var n=(function(e){function t(t){var r=e.call(this,"Validation errors found.")||this;return r.errors=t,r}return r.__extends(t,e),t})(a);t.PremiumKitValidationError=n})),define("modules/clean/react/premium_kit/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.BrandingBackground="branding_background",e.BrandingLogo="branding_logo",e.CustomLogo="custom_logo"})(t.AssetLibraryId||(t.AssetLibraryId={})),(function(e){e.BrandingCustomBackground="branding_custom_background",e.BrandingLogo="branding_logo",e.CustomLogo="custom_logo",e.Sapphire="sapphire",e.PinkLibrary="pink_library",e.Wheat="wheat",e.BlackCherry="black_cherry",e.Canopy="canopy",e.Turquoise="turquoise",e.Topaz="topaz",e.Pollen="pollen",e.Azalea="azalea",e.Shark="shark",e.AbstractHands="abstract_hands",e.RedMan="red_man",e.TransferAnimals="transfer_animals",e.BlueStairs="blue_stairs",e.WAVE="wave"})(t.AssetId||(t.AssetId={})),(function(e){e.Image="image",e.Video="video",e.Color="color",e.Other="other"})(t.AssetType||(t.AssetType={}))})),define("modules/clean/react/premium_kit/upload_provider",["require","exports","tslib","modules/clean/react/premium_kit/api","modules/clean/react/premium_kit/errors","modules/clean/react/premium_kit/types","modules/clean/react/upload_kit/lib/processors","modules/clean/react/upload_kit/lib/upload_block","modules/clean/react/upload_kit/uploader/context","modules/clean/viewer","react"],(function(e,t,r,a,n,o,i,s,l,c,u){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),u=r.__importDefault(u);var p=[".ai",".bmp",".eps",".gif",".indd",".jpeg",".jpg",".otf",".png",".psd",".svg",".svgz",".tif",".tiff",".ttf",".wbmp",".webp"];t.DEFAULT_MAX_FILE_SIZE_IN_MB=5;var m=((d={})[o.AssetLibraryId.BrandingBackground]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d[o.AssetLibraryId.BrandingLogo]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d[o.AssetLibraryId.CustomLogo]={maxFileSize:1048576*t.DEFAULT_MAX_FILE_SIZE_IN_MB,selectMultiple:!1,fileExtensions:p},d),f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uploadBlock=function(e,r){var a=c.Viewer.get_viewer().get_user_by_id(t.props.userId);return s.uploadBlock(a.id,a.root_ns_id,e.bytes,r)},t.commitBlocksBatch=function(e){return Promise.all(e.map((function(e){return a.addAssetByBlock(t.props.userId,t.props.assetId,e.tokens,t.props.assetLibraryId).then((function(e){t.props.onBlocksCommitted&&t.props.onBlocksCommitted(e)}))})))},t.processFiles=function(e,t,r){if(t.length)throw new n.PremiumKitValidationError(t);return i.processFilesWithRenaming(e,t,r)},t}return r.__extends(t,e),t.prototype.render=function(){return u.default.createElement(l.UploadProvider,r.__assign({userId:this.props.userId,processFiles:this.processFiles,commitBlocksBatch:this.commitBlocksBatch,uploadBlock:this.uploadBlock},m[this.props.assetLibraryId],this.props),this.props.children)},t})(u.default.Component);t.UploadProvider=f})),define("modules/clean/react/previews/fidelity_survey/fidelity_survey",["require","exports","tslib","modules/clean/react/async/loadable","modules/clean/web_timing_logger","modules/constants/file_viewer","react"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importDefault(i),t.LoadableFidelitySurvey=a.Loadable({loader:function(){return n.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/previews/fidelity_survey/fidelity_survey_component"],t,r)})).then(r.__importStar).then((function(e){return e.FidelitySurvey}))}))}});var s=(function(e){function a(t){var r=e.call(this,t)||this;return r.shouldLoad=100*Math.random()<o.PREVIEW_FIDELITY_SURVEY_PROBABILITY,r}return r.__extends(a,e),a.prototype.render=function(){var e=this.props,r=e.allowFileDonation,a=e.file;return this.shouldLoad&&a?i.default.createElement(t.LoadableFidelitySurvey,{allowFileDonation:r,file:a}):null},a})(i.default.Component);t.FidelitySurvey=s})),define("modules/clean/react/watermarking/api",["require","exports","modules/clean/api_v2/user_client"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendWatermarkRequest=function(e,t,a,n){var o,i,s=new r.UserApiV2Client;n&&(!(function(e){return"distanceX"in e})(n)?i={image:n.image,position:n.position,margin_x:Math.round(n.marginX),margin_y:Math.round(n.marginY)}:o={image:n.image,distance_x:Math.round(n.distanceX),distance_y:Math.round(n.distanceY),start_x:Math.round(n.startX),start_y:Math.round(n.startY),offset_x_per_row:Math.round(n.offsetXPerRow),offset_y_per_col:Math.round(n.offsetYPerCol)});var l={path:t,overwrite:a,tiled_image:o,image_watermark:i};return s.ns("file_viewer").rpc("watermarking/watermark_file",l,{subjectUserId:e})}})),define("modules/clean/react/watermarking/apply_watermark_button",["require","exports","tslib","react","modules/core/browser","modules/core/i18n","spectrum/popover","spectrum/button","premium-workflows/components/trial/trial_popover_content","modules/clean/loggers/workflows_logger","spectrum/tooltip"],(function(e,t,r,a,n,o,i,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),n=r.__importStar(n);var d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickedTrialPopover=function(){c.logWorkflowsEvent(c.WorkflowsEvent.WatermarkUpsellPopoverClickedWmCopy,t.props.milestone),n.redirect(t.getLink("?_tk=watermarking_popover_wm_upsell"))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.isPopoverTrialVariant()&&c.logWorkflowsEvent(c.WorkflowsEvent.WatermarkUpsellPopoverExposedWmCopy,this.props.milestone)},t.prototype.getLink=function(e){return this.props.isPlusUser?"/buy"+e:"/pro/try"+e},t.prototype.isPopoverTrialVariant=function(){var e=this.props,t=e.allowWatermark,r=e.trialVariant;return!t&&"POPOVER_WM_VALUE_PROPS"===r},t.prototype.renderPopoverContent=function(){return this.isPopoverTrialVariant()?a.default.createElement(i.PopoverContent,null,a.default.createElement(l.TrialPopoverContent,{variant:"watermarking_wm",onClick:this.onClickedTrialPopover})):a.default.createElement(i.PopoverContent,null,a.default.createElement(i.PopoverContentItem,{value:!1,className:"apply-watermark-menu-item__copy"},o.intl.formatMessage({id:"P7t+8/",defaultMessage:"Make a copy"})),a.default.createElement(i.PopoverContentItem,{value:!0,className:"apply-watermark-menu-item__overwrite"},o.intl.formatMessage({id:"WIcUMB",defaultMessage:"Replace original"})))},t.prototype.renderButton=function(){var e=this.props,t=e.onClick,r=e.hasInput,n=a.default.createElement(s.Button,{className:"apply-watermark-button",tagName:"div",disabled:!r,variant:"primary",onClick:t},o.intl.formatMessage({id:"78AHo5",defaultMessage:"Save"}));return r?n:a.default.createElement(u.Tooltip,{className:"watermarking-save-bubble--no-watermark",tooltipContent:o.intl.formatMessage({id:"RwsOX3",defaultMessage:"Add an image or text watermark to save"}),positioning:"below"},n)},t.prototype.render=function(){var e=this.props.hasInput;return a.default.createElement(i.Popover,{onSelection:this.props.onApply},a.default.createElement(i.PopoverTrigger,{disabled:!e},this.renderButton()),this.renderPopoverContent())},t})(a.default.Component);t.ApplyWatermarkButton=d})),define("modules/clean/react/workflows/i18n/apply_translation",["require","exports","modules/core/i18n"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTranslation=function(e){return"Test string"===e.text&&"this is an unused string for sample purposes only"===e.description?r.intl.formatMessage({id:"yZXoct",defaultMessage:"Test string"}):"Upgrade"===e.text&&"Upgrade Dropbox account"===e.description?r.intl.formatMessage({id:"Mc+U9E",defaultMessage:"Upgrade"}):"You’re in trial mode."===e.text&&"This will be shown to basic and plus users when they test out watermarking"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"0jP5B/",defaultMessage:"You’re in trial mode."}):"Upgrade to Professional to apply your watermark."===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"XAmQfp",defaultMessage:"Upgrade to Professional to apply your watermark."}):"Upgrade to Professional for advanced features"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"GlPgxg",defaultMessage:"Upgrade to Professional for advanced features"}):"Upgrade to Professional to get watermarking"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"VlErup",defaultMessage:"Upgrade to Professional to get watermarking"}):"Protect work right in Dropbox"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"8h+ZVh",defaultMessage:"Protect work right in Dropbox"}):"Apply watermarks quickly"===e.text&&"Value prop: Users can apply watermarks to their pdf/images quickly"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"uPK3Ke",defaultMessage:"Apply watermarks quickly"}):"Create custom watermarks"===e.text&&"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"STI9Ug",defaultMessage:"Create custom watermarks"}):"Protect work with watermarking"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them in Dropbox"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"0e5Pxx",defaultMessage:"Protect work with watermarking"}):"Get %(pro_space_limit)s of storage"===e.text&&"Value prop: Users get more storage if they upgrade to Professional"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"SSoF5o",defaultMessage:"Get {pro_space_limit} of storage"},{pro_space_limit:e.pro_space_limit}):"Free up space with Smart Sync"===e.text&&"Value prop: Users can free up space with Smart Sync if they upgrade to Professional"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"+NeLdn",defaultMessage:"Free up space with Smart Sync"}):"Make a copy"===e.text&&"As in: save the markup file as a copy"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"NhIxxD",defaultMessage:"Make a copy"}):"Replace original"===e.text&&"As in: overwrite this file with markup file"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"kOdY2i",defaultMessage:"Replace original"}):"Save"===e.text&&"Save the file"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"T45O2I",defaultMessage:"Save"}):"Try Professional free"===e.text&&"Try Dropbox Professional for free"===e.description?r.intl.formatMessage({id:"EwtFU3",defaultMessage:"Try Professional free"}):"Set expiration dates for file requests"===e.text&&"Value prop: Users can set expiration dates for their file requests"===e.description?r.intl.formatMessage({id:"M2xkJm",defaultMessage:"Set expiration dates for file requests"}):"Add an image or text watermark to save"===e.text&&"As in: notifying user they cannot save watermark if no image uploaded or text set"===e.description&&"watermarking"===e.project?r.intl.formatMessage({id:"RwsOX3",defaultMessage:"Add an image or text watermark to save"}):null}})),define("modules/clean/react/workflows/i18n/with_translations",["require","exports","tslib","react","premium-workflows/common/i18n","modules/core/i18n","modules/clean/react/helpers","modules/clean/react/workflows/i18n/apply_translation","modules/clean/display_format"],(function(e,t,r,a,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.withTranslations=function(e){var t=function(t){return a.default.createElement(n.TranslationProvider,{applyTranslation:s.applyTranslation,formatBytes:l.format_bytes,formatPercent:function(e){return o.intl.formatNumber(e/100,{style:"percent"})},isEnvExternal:!0},a.default.createElement(e,r.__assign({},t)))};return t.displayName="WithTranslations("+i.getDisplayName(e)+")",t}})),define("modules/clean/react/workflows/markup_icons",["require","exports","tslib","react"],(function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.arrowIcon=a.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("line",{y1:"-1",x2:"18.4444",y2:"-1",transform:"matrix(0.714122 -0.700021 0.724869 0.688886 2 19.5325)",stroke:"white","stroke-width":"2"}),a.default.createElement("path",{d:"M15.6003 4.81822L15.4013 13.4904L6.62128 5.14504L15.6003 4.81822Z",fill:"white"})),t.circleIcon=function(e){var t=e.stroke,r=void 0===t?"white":t,n=e.fill,o=void 0===n?"none":n;return a.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:o,xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("rect",{x:"1",y:"1",width:"18",height:"18",rx:"9",stroke:r,"stroke-width":"2"}))},t.drawIcon=a.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("path",{d:"M1 3.12785C1 3.12785 5.98474 -0.481787 7.42857 1.70169C9.66397 5.08224 -0.322983 7.42821 2.28571 10.6819C4.85714 13.8892 11.2857 4.26736 13.8571 7.37626C16.659 10.7637 3.89286 14.5305 6.78571 18.3792C9.19643 21.5864 19 11.3233 19 11.3233",stroke:"white","stroke-width":"2",strokeLinecap:"round"}),a.default.createElement("circle",{cx:"19",cy:"11",r:"2",fill:"white"})),t.rectIcon=a.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"})),t.textIcon=a.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"}),a.default.createElement("line",{x1:"5",y1:"6",x2:"13",y2:"6",stroke:"white","stroke-width":"2"}),a.default.createElement("line",{x1:"9",y1:"5",x2:"9",y2:"13",stroke:"white","stroke-width":"2"})),t.transparentFillIcon=a.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("rect",{x:"1",y:"1",width:"15",height:"15",rx:"7.5",stroke:"#F3F4F5","stroke-width":"2"}),a.default.createElement("line",{x1:"1.93223",y1:"13.6637",x2:"13.8322",y2:"4.31368",stroke:"#F3F4F5","stroke-width":"2"}))})),define("premium-workflows/common/i18n",["require","exports","tslib","react","prop-types"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importStar(n),t.IntlString=function(e,t){if(t.applyTranslation?t.applyTranslation(e):null)return a.createElement("span",null,t.applyTranslation(e));var r={};return t.isEnvExternal||(r={textShadow:"2px 2px 0px red"}),a.createElement("span",{style:r},e.text)},t.IntlString.displayName="IntlString",t.IntlString.contextTypes={applyTranslation:n.func},t.IntlPluralString=function(e,r){return t.IntlString(e,r)},t.IntlPluralString.displayName="IntlPluralString",t.IntlPluralString.contextTypes={applyTranslation:n.func};var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildContext=function(){return{applyTranslation:this.props.applyTranslation,formatBytes:this.props.formatBytes,formatPercent:this.props.formatPercent,isEnvExternal:this.props.isEnvExternal}},t.prototype.render=function(){return a.createElement("div",null,this.props.children)},t})(a.Component);t.TranslationProvider=o,o.displayName="TranslationProvider",o.childContextTypes={applyTranslation:n.func,formatBytes:n.func,formatPercent:n.func,isEnvExternal:n.bool}})),define("premium-workflows/components/base/apply_button",["require","exports","tslib","react","spectrum/popover","spectrum/button","premium-workflows/common/i18n"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.renderPopoverContent=function(){var e=this.props.makeACopyText||a.createElement(i.IntlString,{text:"Make a copy",description:"As in: save the markup file as a copy",project:"watermarking"}),t=this.props.overwriteText||a.createElement(i.IntlString,{text:"Replace original",description:"As in: overwrite this file with markup file",project:"watermarking"});return a.createElement(n.PopoverContent,null,a.createElement(n.PopoverContentItem,{value:!1,className:"apply-workflow-menu-item__copy"},e),a.createElement(n.PopoverContentItem,{value:!0,className:"apply-workflow-menu-item__overwrite"},t))},t.prototype.renderButton=function(){var e=this.props,t=e.onClick,r=e.disabled,n=this.props.buttonText||a.createElement(i.IntlString,{text:"Save",description:"Save the file",project:"watermarking"});return a.createElement(o.Button,{className:"apply-workflow-button",tagName:"div",disabled:r,variant:"primary",onClick:t},n)},t.prototype.render=function(){var e=this.props,t=e.onApply,r=e.disabled;return a.createElement(n.Popover,{className:"apply-workflow-button__popover",onSelection:t},a.createElement(n.PopoverTrigger,{disabled:r},this.renderButton()),this.renderPopoverContent())},t})((a=r.__importStar(a)).Component);t.ApplyButton=s})),define("premium-workflows/components/base/slider",["require","exports","tslib","react","classnames"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n);var o={trackBaseColor:"#dddfe1",trackFillColor:"#0d2484"},i={trackBaseColor:"#6a7c8f",trackFillColor:"#fff"},s=(function(e){function t(t){var r=e.call(this,t)||this;return r.handleChange=function(){if(r.inputEl){var e=Number(r.inputEl.value),t=r.props.onChange,a={value:e};r.setState(a,(function(){t&&t(e)}))}},r.getTrackStyleBackground=function(e){var t=r.props,a=t.darkMode,n=t.max,s=t.min,l=Math.round(100*(e-s)*100/(n-s))/100,c=a?i:o,u=c.trackFillColor,d=c.trackBaseColor;return"linear-gradient(to right, "+u+" 0%, "+u+" "+l+"%, "+d+" "+l+"%, "+d+" 100%)"},r.handleRef=function(e){r.inputEl=e||void 0,r.handleChange()},r.state={value:t.value||50},r}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){e.value!==this.props.value&&this.setState({value:this.props.value})},t.prototype.render=function(){var e=this.props,t=e.className,r=e.darkMode,o=e.disabled,i=e.fullWidth,s=e.min,l=e.max,c=e.name,u=e.step,d=this.state.value,p=n.default("range-slider__wrapper",{"range-slider--dark-mode":r,"range-slider--full-width":i,"range-slider--disabled":o},t);return a.createElement("span",{className:p},a.createElement("span",{className:"range-slider__track",style:{background:this.getTrackStyleBackground(d)}}),a.createElement("input",{className:"range-slider",disabled:o,type:"range",min:s,max:l,value:d,name:c,step:u,onChange:this.handleChange,ref:this.handleRef,"aria-valuemin":s,"aria-valuemax":l,"aria-valuenow":d}))},t})(a.PureComponent);t.Slider=s,s.defaultProps={disabled:!1,min:0,max:100,step:1},t.default=s})),define("premium-workflows/components/base/top_banner",["require","exports","tslib","react","spectrum/button"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.TopBanner=function(e){var t=e.primaryText,r=e.secondaryText,o=e.buttonText,i=e.href,s=e.onClick;return a.createElement("div",{className:"top-banner"},a.createElement("div",{className:"top-banner__text"},a.createElement("div",{className:"top-banner__primary-text"},t," "),r),a.createElement(n.Button,{variant:"secondary",href:i,onClick:s},o))}})),define("premium-workflows/components/branding/background",["require","exports","premium-workflows/components/branding/background/thumbnail","premium-workflows/components/branding/background/color","premium-workflows/components/branding/background/image","premium-workflows/components/branding/background/video"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Thumbnail=r.Thumbnail,t.ColorBackground=a.ColorBackground,t.ImageBackground=n.ImageBackground,t.VideoBackground=o.VideoBackground})),define("premium-workflows/components/branding/background/color",["require","exports","tslib","react","classnames"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n),t.ColorBackground=function(e){var t=e.colorHex,r=e.className;return a.createElement("div",{className:n.default("branding-background",r),style:{backgroundColor:t}})}})),define("premium-workflows/components/branding/background/image",["require","exports","tslib","react","classnames"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n),t.ImageBackground=function(e){var t=e.src,r=e.className;return a.createElement("div",{className:n.default("branding-background","branding-background--image",r),style:{backgroundImage:'url("'+t+'")'}})}})),define("premium-workflows/components/branding/background/thumbnail",["require","exports","tslib","react","classnames"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n),t.Thumbnail=function(e){var t=e.className,r=e.colorHex,o=e.src,i={backgroundColor:r};return o&&(i.backgroundImage="url("+o+")"),a.createElement("span",{className:n.default("branding-background-thumbnail",t),style:i})}})),define("premium-workflows/components/branding/background/video",["require","exports","tslib","react","classnames"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n),t.VideoBackground=function(e){var t=e.src,r=e.className;return a.createElement("div",{className:n.default("branding-background",r)},a.createElement("video",{key:t,className:"branding-background__video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0},a.createElement("source",{src:t,type:"video/mp4"})))}})),define("premium-workflows/components/branding/branding_block",["require","exports","tslib","react","classnames","dig-components/typography"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importDefault(n),t.BrandingBlock=function(e){var t=e.background,r=e.className,i=e.orgLogoUrl,s=e.orgName;return a.createElement("div",{className:n.default("branding-block",r,{"branding-block--includes-background":!!t})},t&&a.createElement("div",{className:"branding-block__background"},t),a.createElement("div",{className:"branding-block__info"},a.createElement("img",{className:"branding-block__item branding-block__item--img",src:i}),a.createElement(o.Text,{className:"branding-block__item branding-block__item--name",tagName:"span",isBold:!0},s)))}})),define("premium-workflows/components/branding/cover_modal",["require","exports","tslib","react","dig-components/modal","premium-workflows/components/branding/cover_modal/modal_content"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.CoverModal=function(e){var t=e.onClose,i=e.open,s=r.__rest(e,["onClose","open"]);return a.createElement(n.Modal,{open:i,onRequestClose:t,overlayClassName:"cover-modal",width:"large",isCentered:!0},a.createElement(o.ModalContent,Object.assign({onClose:t},s)))},t.CoverModal.displayName="CoverModal"})),define("premium-workflows/components/branding/cover_modal/card",["require","exports","tslib","react","dig-components/buttons","dig-components/typography"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.Card=function(e){var t=e.closeButtonText,r=e.onClose,i=e.orgLogoUrl,s=e.orgName;return a.createElement("div",{className:"cover-modal__card"},a.createElement("img",{className:"cover-modal__card-logo-img",src:i}),a.createElement(o.Text,{className:"cover-modal__card-org-name",isBold:!0},s),a.createElement(n.Button,{variant:"primary",onClick:r},t))},t.Card.displayName="Card"})),define("premium-workflows/components/branding/cover_modal/modal_content",["require","exports","tslib","react","premium-workflows/components/branding/cover_modal/card"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.ModalContent=function(e){var t=e.background,r=e.closeButtonText,o=e.onClose,i=e.orgLogoUrl,s=e.orgName;return a.createElement("div",{className:"cover-modal__content"},a.createElement(n.Card,{closeButtonText:r,onClose:o,orgLogoUrl:i,orgName:s}),a.createElement("div",{className:"cover-modal__background"},t))},t.ModalContent.displayName="ModalContent"})),define("premium-workflows/components/sidebar_pane/analytics_pane",["require","exports","react-redux","premium-workflows/data/selectors","premium-workflows/data/actions","premium-workflows/components/sidebar_pane/analytics_pane/unconnected_analytics_pane"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnalyticsPane=r.connect((function(e,t){return{dataBundle:{totalViewCount:a.FileLinkAnalyticsSelectors.totalViews(e)(t.fileId),totalUniqueViewCount:a.FileLinkAnalyticsSelectors.totalUniqueViews(e)(t.fileId),viewBreakout:a.FileLinkAnalyticsSelectors.totalViewsByDate(e)(t.fileId),totalDownloadCount:a.FileLinkAnalyticsSelectors.totalDownloadCount(e)(t.fileId),viewBreakoutIsComplete:!0},isFetchingAnalyticsData:a.MiscSelectors.isFetchingAnalyticsData(e),now:new Date}}),(function(e){return{changeDisplayMode:n.changeDisplayModeThunk(e),refreshData:n.refreshDataThunk(e),fetchingTimedOut:n.fetchingTimedOutThunk(e),componentUnmounted:n.componentUnmounted}}))(o.UnconnectedAnalyticsPane)})),define("premium-workflows/components/sidebar_pane/analytics_pane/total_views",["require","exports","tslib","react","dig-components/typography","react-intl"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.LOADING="loading",t.TotalViews=function(e){var r=e.totalViews,i=o.useIntl();return a.default.createElement("div",{className:"totalViews"},a.default.createElement("div",{className:"content"},a.default.createElement(n.Text,{tagName:"p"},a.default.createElement("strong",null,i.formatMessage({id:"kNRLRZ",defaultMessage:"Total views"}))),a.default.createElement(n.Title,{size:"large"},r===t.LOADING?i.formatMessage({id:"Xe3IgJ",defaultMessage:"…"}):r)))}})),define("premium-workflows/components/sidebar_pane/analytics_pane/total_downloads",["require","exports","tslib","react","dig-components/typography","react-intl"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.LOADING="loading",t.TotalDownloads=function(e){var r=e.totalDownloads,i=o.useIntl();return a.default.createElement("div",{className:"totalDownloads"},a.default.createElement("div",{className:"content"},a.default.createElement(n.Text,{tagName:"p"},a.default.createElement("strong",null,i.formatMessage({id:"BkU8WL",defaultMessage:"Total downloads"}))),a.default.createElement(n.Title,{size:"large"},r===t.LOADING?i.formatMessage({id:"Xe3IgJ",defaultMessage:"…"}):r)))}})),define("premium-workflows/components/sidebar_pane/analytics_pane/unconnected_analytics_pane",["require","exports","tslib","react","premium-workflows/components/sidebar_pane/analytics_pane/total_views","premium-workflows/components/sidebar_pane/analytics_pane/total_downloads","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/typography","react-intl","dig-components/progress_indicators","external/lodash","moment","premium-workflows/data/amp-logger"],(function(e,t,r,a,n,o,i,s,l,c,u,d,p,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),m=r.__importDefault(m),t.EARLIER_DATES_ID="premium-analytics-pane-earlier-dates",t.LATER_DATES_ID="premium-analytics-pane-later-dates";function _(e,t,r){return e.formatDate(t,{day:"numeric",month:"short",year:t.getUTCFullYear()===r?void 0:"numeric",timeZone:"UTC"})}t.UnconnectedAnalyticsPaneInternal=function(e){var r=e.refreshData,g=e.componentUnmounted,w=e.dataBundle,h=w.viewBreakout,y=w.totalViewCount,v=w.totalDownloadCount,k=e.fileId,b=e.changeDisplayMode,x=e.highcharts,E=e.highchartsReactComponent,M=e.isFetchingAnalyticsData,A=e.fetchingTimedOut,C=e.now,S=C.getFullYear(),P=a.useRef(),T=a.useRef(),D=a.useState((function(){var e=(function(e,t){var r=m.default.utc({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}),a=r.clone();return a=a.subtract(t,"day"),{today:r,xDaysAgo:a}})(C,6),t=e.xDaysAgo,r=e.today;return P.current=r.toDate(),{startDate:t.toDate(),endDate:P.current}})),I=D[0],F=D[1],U=I.startDate,B=I.endDate,N=a.useState("succeeded"),O=N[0],L=N[1],j=u.useIntl();a.useEffect((function(){f.AmpLogger.singleton.logAnalyticsPaneClicked()}),[]),a.useEffect((function(){return g}),[g]),a.useEffect((function(){b(I,k)}),[I,k,b]);var q=a.useCallback((function(){A(),L("timed_out")}),[A,L]);a.useEffect((function(){return T.current&&(clearTimeout(T.current),T.current=void 0),M?(L("loading"),T.current=window.setTimeout(q,1e4)):L("succeeded"),function(){return L("succeeded")}}),[q,M]);var R,V=a.default.createElement(n.TotalViews,{totalViews:"loading"===O?n.LOADING:y}),W=a.default.createElement(o.TotalDownloads,{totalDownloads:"loading"===O?n.LOADING:v}),z=j.formatMessage({id:"NtAmRL",defaultMessage:"{from_date} - {to_date}"},{from_date:_(j,U,S),to_date:_(j,B,S)}),Y=a.default.createElement(c.Text,{size:"large"},z),G=a.useCallback((function(e){var r=m.default(U).add(e.currentTarget.id===t.LATER_DATES_ID?7:-7,"days"),a=r.clone().add(6,"days");F({startDate:r.toDate(),endDate:a.toDate()})}),[U]),H=j.formatMessage({id:"DVJ4/q",defaultMessage:"View earlier dates"}),K=a.default.createElement(i.IconButton,{variant:"transparent",id:t.EARLIER_DATES_ID,onClick:G},a.default.createElement(s.UIIcon,{src:l.ChevronLeftLine,"aria-label":H})),Q=j.formatMessage({id:"UY88fh",defaultMessage:"View later dates"}),X=a.default.createElement(i.IconButton,{variant:"transparent",id:t.LATER_DATES_ID,onClick:G,disabled:Boolean(P.current&&B>=P.current)},a.default.createElement(s.UIIcon,{src:l.ChevronRightLine,"aria-label":Q})),Z=j.formatMessage({id:"F7KRcg",defaultMessage:"Refresh"}),J=a.useCallback((function(){f.AmpLogger.singleton.logRefreshClicked(),r(I,k)}),[r,I,k]),$=a.default.createElement(i.IconButton,{onClick:J,variant:"transparent"},a.default.createElement(s.UIIcon,{src:l.SyncingLine,"aria-label":Z})),ee=a.default.createElement("div",{className:"title-row"},Y,a.default.createElement("span",{className:"spacer"}),K,X,$),te=a.useMemo((function(){return(function(e,t,r){var a,n=t.startDate,o=t.endDate,i=r.formatMessage({id:"zL1QZ0",defaultMessage:"Views and Downloads"}),s=r.formatMessage({id:"3D60lf",defaultMessage:"View count"}),l=r.formatMessage({id:"Qp96Z1",defaultMessage:"Download count"}),c=p.keyBy(p.filter(e,(function(e){var t=e.date;return Boolean(t)})),(function(e){var t=e.date;return m.default.utc(t).startOf("day").format()})),u=[],d=[],f=[],_=!1,g=m.default.utc(n),w=m.default.utc(o);for(;!g.isAfter(w,"day");){var h=null!==(a=c[g.format()])&&void 0!==a?a:{},y=h.viewCount,v=void 0===y?0:y,k=h.downloadCount,b=void 0===k?0:k;u.push(r.formatDate(g.toDate(),{day:"numeric",month:"numeric",timeZone:"UTC"})),d.push(v),f.push(b),_=_||v>0||b>0,g=g.add(1,"day")}if(!_)return null;return{chart:{type:"column"},title:{text:""},xAxis:{categories:u},yAxis:{allowDecimals:!1,min:0,title:{text:i}},tooltip:{headerFormat:'<span class="hc-tooltip-header">{point.key}</span><div class="hc-tooltip-container">',pointFormat:'<div>\n                      <div class="hc-tooltip-name" style="color:{series.color}">{series.name}: </div>\n                      <div class="hc-tooltip-point">{point.y}</div>\n                    </div>',footerFormat:"</div>",shared:!0,useHTML:!0},plotOptions:{column:{dataLabels:{enabled:!0,formatter:function(){return 0!=this.y?""+this.y:""}}}},series:[{type:"column",name:s,data:d},{type:"column",name:l,data:f}],credits:{enabled:!1},legend:{enabled:!1}}})(h,I,j)}),[h,I,j]);return R="loading"===O?a.default.createElement("div",{className:"progress-spinner"},a.default.createElement(d.Spinner,{"aria-valuetext":j.formatMessage({id:"27Ivr1",defaultMessage:"Loading all analytics information"}),size:"large"})):null===te?a.default.createElement(c.Text,{size:"large",tagName:"div",className:"no-data"},j.formatMessage({id:"Ooep1K",defaultMessage:"No views were found in this time range"})):x&&E&&a.default.createElement(E,{options:te,highcharts:x}),a.default.createElement("div",{className:"pro-analytics-pane"},V,W,ee,R)},t.UnconnectedAnalyticsPane=function(n){var o=a.useState(null),i=o[0],s=o[1];new Promise((function(t,r){e(["highcharts-7"],t,r)})).then(r.__importStar).then((function(e){i||s(e.default)}));var l=a.useState(null),c=l[0],u=l[1];return new Promise((function(t,r){e(["highcharts-react-official"],t,r)})).then(r.__importStar).then((function(e){c||u(e.default)})),a.default.createElement(t.UnconnectedAnalyticsPaneInternal,Object.assign({},n,{highcharts:i,highchartsReactComponent:c}))}})),define("premium-workflows/components/trial/banner",["require","exports","tslib","react","premium-workflows/components/base/top_banner","premium-workflows/common/i18n"],(function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),t.PrimaryText=function(e){switch(e.mode){case"watermarking":return a.createElement(o.IntlString,{text:"You’re in trial mode.",description:"This will be shown to basic and plus users when they test out watermarking",project:"watermarking"});default:return null}},t.SecondaryText=function(e){switch(e.mode){case"watermarking":return a.createElement(o.IntlString,{text:"Upgrade to Professional to apply your watermark.",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.Banner=function(e){var r=e.mode,i=e.onClick;return a.createElement(n.TopBanner,{primaryText:a.createElement(t.PrimaryText,{mode:r}),secondaryText:a.createElement(t.SecondaryText,{mode:r}),buttonText:a.createElement(o.IntlString,{text:"Upgrade",description:"Upgrade Dropbox account"}),onClick:i})}})),define("premium-workflows/components/trial/trial_popover_content",["require","exports","tslib","react","prop-types","premium-workflows/common/i18n","spectrum/button","spectrum/icon_form"],(function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a),n=r.__importStar(n),t.Title=function(e){switch(e.variant){case"watermarking_wm":return a.createElement(o.IntlString,{text:"Upgrade to Professional to get watermarking",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});case"file_requests":return a.createElement(o.IntlString,{text:"Upgrade to Professional for advanced features",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.ValueProp1=function(e){switch(e.variant){case"watermarking_wm":return a.createElement(o.IntlString,{text:"Protect work right in Dropbox",description:"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox",project:"watermarking"});case"file_requests":return a.createElement(o.IntlString,{text:"Set expiration dates for file requests",description:"Value prop: Users can set expiration dates for their file requests"});default:return null}},t.ValueProp2=function(e){switch(e.variant){case"watermarking_wm":return a.createElement(o.IntlString,{text:"Apply watermarks quickly",description:"Value prop: Users can apply watermarks to their pdf/images quickly",project:"watermarking"});case"file_requests":return a.createElement(o.IntlString,{text:"Get %(pro_space_limit)s of storage",pro_space_limit:e.proSpaceLimit||"",description:"Value prop: Users get more storage if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp2.contextTypes={formatBytes:n.func},t.ValueProp3=function(e){switch(e.variant){case"watermarking_wm":return a.createElement(o.IntlString,{text:"Create custom watermarks",description:"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)",project:"watermarking"});case"file_requests":return a.createElement(o.IntlString,{text:"Free up space with Smart Sync",description:"Value prop: Users can free up space with Smart Sync if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp=function(e){var t=e.children;return a.createElement("span",{className:"value-prop"},a.createElement(s.IconForm,{className:"value-prop__check",name:"check"}),t)},t.TrialPopoverContent=function(e){var r=e.variant,n=e.proSpaceLimit,s=e.onClick;return a.createElement("div",{className:"trial-popover-content"},a.createElement("div",{className:"trial-popover-content__title"},a.createElement(t.Title,{variant:r})),a.createElement("div",{className:"trial-popover-content__value-props"},a.createElement(t.ValueProp,null,a.createElement(t.ValueProp1,{variant:r})),a.createElement(t.ValueProp,null,a.createElement(t.ValueProp2,{variant:r,proSpaceLimit:n})),a.createElement(t.ValueProp,null,a.createElement(t.ValueProp3,{variant:r}))),a.createElement(i.Button,{variant:"primary",onClick:s,shouldWrapContent:!0},a.createElement(o.IntlString,{text:"Try Professional free",description:"Try Dropbox Professional for free"})))}})),define("premium-workflows/data/actions",["require","exports","tslib","moment","modules/clean/api_v2/redux/user_link_analytics","premium-workflows/data/cache_manager","premium-workflows/data/cache"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a);function s(e){return{type:"@@isFetchingFileAnalytics",payload:e}}function l(e){return{type:"@@loadSavedFileData",payload:e}}function c(){return{type:"@@setFetchingAnalyticsDataStartTime"}}function u(){return{type:"@@fetchingTimedOut"}}function d(e,t){return{type:"@@updateFileIdAndDateRange",payload:{fileId:e,dateRange:t}}}function p(e,t){return function(r,c){var u=r.startDate,p=r.endDate,f=a.default.utc(u),_=a.default.utc(p).add(1,"days");o.CacheManager.refreshTimer.create(r,c,m(e));var g="("+f.format(i.CACHE_DATE_FORMAT)+")("+_.format(i.CACHE_DATE_FORMAT)+")";e(d(c,g));var w=o.CacheManager.get(c,g);if(!t&&w)e(l(w));else{e({type:"@@setFetchingAnalyticsDataStartTime"});var h=[{file_id:c}];(function(e,t,r,a){e(s(a)),e(n.getUserFileAnalyticsAction({arg:{from_date:t,to_date:r,file_ids:a},params:{}},a))})(e,f.format("YYYY-MM-DDTHH:mm:ss[Z]"),_.format("YYYY-MM-DDTHH:mm:ss[Z]"),h)}}}function m(e){return p(e,!0)}t.isFetchingUserAnalytics=function(){return{type:"@@isFetchingUserAnalytics",payload:void 0}},t.isFetchingFileAnalytics=s,t.loadSavedFileData=l,t.setFetchingAnalyticsStartTime=c,t.fetchingTimedOut=u,t.fetchingTimedOutThunk=function(e){return function(){return e({type:"@@fetchingTimedOut"})}},t.updateFileIdAndDateRange=d,t.changeDisplayModeThunk=p,t.refreshDataThunk=m,t.componentUnmounted=function(){o.CacheManager.refreshTimer.destroy()}})),define("premium-workflows/data/cache_manager",["require","exports","tslib","moment","premium-workflows/data/cache"],(function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a);var o,i=void 0,s="";(o=t.CacheManager||(t.CacheManager={})).get=function(e,t){var r,o,i=n.loadSavedDataBundle(e,t);if(i&&(r=a.default(i.timestamp),o=a.default(),a.default.duration(o.diff(r)).asSeconds()<300))return i},o.set=function(e,t,r){n.saveDataBundle(e,t,r)},o.refreshTimer={create:function(e,t,r){s!==t&&(s=t,i&&clearInterval(i),i=window.setInterval((function(){return r(e,t)}),301e3))},destroy:function(){i&&clearInterval(i)}}})),define("premium-workflows/data/cache",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Map;t.CACHE_DATE_FORMAT="YYYY-MM-DD",t.loadSavedDataBundle=function(e,t){var a=r.get(e);if(a)return a[t]},t.saveDataBundle=function(e,t,a){var n;if(r.has(e)){var o=r.get(e),i={timestamp:new Date,fileAnalytics:a};o[t]=i,r.set(e,o)}else r.set(e,((n={})[t]={timestamp:new Date,fileAnalytics:a},n))},t.invalidateFileId=function(e){r.has(e)&&r.delete(e)}})),define("premium-workflows/data/reducer",["require","exports","tslib","premium-workflows/data/cache_manager","external/lodash","moment","premium-workflows/data/amp-logger"],(function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),t.initialState={fileId:"",dateRange:"",file_link_daily_analytics:{analytics:void 0},user_link_daily_analytics:{analytics:void 0},isFetchingUserAnalyticsData:!1,fetchingAnalyticsDataFileIds:void 0,fetchingAnalyticsDataStartTime:void 0},t.reducer=function(e,s){switch(void 0===e&&(e=t.initialState),s.type){case"@@apiv2_redux/user_link_analytics/get_user_analytics_result":if(s.error)return r.__assign(r.__assign({},e),{isFetchingUserAnalyticsData:!1});if(s.payload.result){var l=s.payload.result;return r.__assign(r.__assign({},e),{isFetchingUserAnalyticsData:!1,user_link_daily_analytics:l})}break;case"@@apiv2_redux/user_link_analytics/get_user_file_analytics_result":if(s.error)return r.__assign(r.__assign({},e),{fetchingAnalyticsDataFileIds:void 0});if(s.payload.result){var c=s.meta;if(e.fetchingAnalyticsDataFileIds&&n.isEqual(c,e.fetchingAnalyticsDataFileIds)){var u=s.payload.result;return a.CacheManager.set(e.fileId,e.dateRange,u),i.AmpLogger.singleton.logFetchTime(o.default().diff(e.fetchingAnalyticsDataStartTime),1),r.__assign(r.__assign({},e),{fetchingAnalyticsDataFileIds:void 0,file_link_daily_analytics:u})}}break;case"@@fetchingTimedOut":return r.__assign(r.__assign({},e),{isFetchingUserAnalyticsData:!1,fetchingAnalyticsDataFileIds:void 0});case"@@isFetchingUserAnalytics":return r.__assign(r.__assign({},e),{isFetchingUserAnalyticsData:!0});case"@@isFetchingFileAnalytics":return r.__assign(r.__assign({},e),{fetchingAnalyticsDataFileIds:s.payload});case"@@loadSavedFileData":return r.__assign(r.__assign({},e),{file_link_daily_analytics:s.payload.fileAnalytics});case"@@setFetchingAnalyticsDataStartTime":return r.__assign(r.__assign({},e),{fetchingAnalyticsDataStartTime:new Date});case"@@updateFileIdAndDateRange":var d=s.payload,p=d.fileId,m=d.dateRange;return r.__assign(r.__assign({},e),{fileId:p,dateRange:m})}return e}})),define("premium-workflows/data/selectors",["require","exports","reselect"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n,o=function(e){return e.user_link_daily_analytics.analytics},i=function(e){return e.file_link_daily_analytics.analytics};(a=t.UserLinkAnalyticsSelectors||(t.UserLinkAnalyticsSelectors={})).totalViewsSelector=r.createSelector(o,(function(e){return e?e.reduce((function(e,t){return e+(t.total_view_count||0)}),0):0})),a.totalUniqueViewsSelector=r.createSelector(o,(function(e){return e?e.reduce((function(e,t){return e+(t.unique_view_count||0)}),0):0})),a.totalViewsByDate=r.createSelector(o,(function(e){return e?e.map((function(e){return{date:e.date,unique_view_count:e.unique_view_count,total_view_count:e.total_view_count}})):[]})),(n=t.FileLinkAnalyticsSelectors||(t.FileLinkAnalyticsSelectors={})).totalViews=r.createSelector(i,(function(e){return function(t){return e?e.filter((function(e){return(e.file_id&&e.file_id.file_id)===t})).reduce((function(e,t){return e+(t.total_view_count||0)}),0):0}})),n.totalUniqueViews=r.createSelector(i,(function(e){return function(t){return e?e.filter((function(e){return(e.file_id&&e.file_id.file_id)===t})).reduce((function(e,t){return e+(t.unique_view_count||0)}),0):0}})),n.totalViewsByDate=r.createSelector(i,(function(e){return function(t){return e?e.filter((function(e){return(e.file_id&&e.file_id.file_id)===t})).map((function(e){return{date:e.date?new Date(e.date):void 0,viewCount:e.total_view_count,uniqueViewCount:e.unique_view_count,downloadCount:e.download_count}})):[]}})),n.totalDownloadCount=r.createSelector(i,(function(e){return function(t){return e?e.filter((function(e){return(e.file_id&&e.file_id.file_id)===t})).reduce((function(e,t){return e+(t.download_count||0)}),0):0}})),(t.MiscSelectors||(t.MiscSelectors={})).isFetchingAnalyticsData=function(e){var t=e.isFetchingUserAnalyticsData,r=e.fetchingAnalyticsDataFileIds;return t||Boolean(r)}})),define("premium-workflows/data/amp-logger",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(t){e.internalMetricsReporter=t}return Object.defineProperty(e,"singleton",{get:function(){if(!this.internalInstance)throw new Error("AmpLogger.singleton was never set. Be sure to set the instance before using it!");return this.internalInstance},set:function(e){this.internalInstance=e},enumerable:!0,configurable:!0}),e.prototype.record=function(t,r){e.internalMetricsReporter&&e.internalMetricsReporter.createStats({ns:"smart_links_analytics",name:t}).record(r)},e.prototype.recordDuration=function(t,r,a){e.internalMetricsReporter&&e.internalMetricsReporter.createStats({ns:"smart_links_analytics",name:t}).recordDuration(r,a)},e.prototype.logFetchTime=function(e,t){this.recordDuration("fetch_time",e,t)},e.prototype.logRefreshClicked=function(){this.record("refresh_clicked",1)},e.prototype.logAnalyticsPaneClicked=function(){this.record("pane_clicked",1)},e})();t.AmpLogger=r,r.internalMetricsReporter=void 0,r.internalInstance=void 0}));
//# sourceMappingURL=pkg-premimum_workflows.min.js-vfl-NKHKb.map